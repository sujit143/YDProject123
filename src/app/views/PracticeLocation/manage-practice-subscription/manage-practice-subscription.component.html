<p-toast [style]="{ marginTop: '80px' }"></p-toast>

<div class="panel blank-panel" style="background: #969696; border: none; border-radius: 0px;margin-left: -30px;
margin-right: -30px;">
  <div class="row wrapper border-bottom white-bg page-heading" style="background: none; padding: 0px;">
    <div class="col-sm-10" style="color: #FFF;">
      <h2 style="margin: 10px 0px 10px 20px; font-size: 20px;font-weight: 100;color: #ffffff">Manage Subscriptions</h2>
    </div>
  </div>
</div>
<div class="panel-body">

  <div class="row">
    <div class="col-md-12">
      <div class="col-md-6" style="padding-top: 2px">
        <span>
          <label>Search String</label><input type="text" id="txtSearchPracticeLocationSubsription"
            class="input-medium form-control textbox-search-onenterkey" title="" maxlength="60"
            data-enterkey-pressed="#btnSearchMangePraticeLoaction">
        </span>
      </div>
      <div class="col-md-2" style="padding-top: 25px">
        <button id="btnSearchMangePraticeLoaction" class="btn btn-primary"
          data-post-url="/Admin/GetPracticeLocationSubscriptionList" data-update-container="#dvPracticeLocationSubList">
          Search</button>
      </div>
      <div class="col-md-4" style="padding-top: 25px">
        <a href="javascript:void(0)" class="btn btn-primary pull-right" style="margin-right: 100px;"
          id="btnAddPracticeLocationSubscription" (click)="openAddpopup()">Add New</a>
      </div>
    </div>
  </div>

</div>
<div id="tableresponce">
<div class="row">
  <div class="col-md-12">

    <div id="dvPracticeLocationSubList">


      <div class="ibox-content" style="margin-top:10px">
        <table class="table table-striped table-hover table-condensed">
          <thead>
            <tr>
              <th scope="col">Practice</th>
              <th scope="col">Location</th>
              <th scope="col">Status</th>
              <th scope="col">Subscription Start Date</th>
              <th scope="col">Subscription End Date</th>
              <th scope="col"></th>




            </tr>
          </thead>
          <tbody>
            <tr data-id="126" id="trappointmentstatus" class="trappointmentstatus">

              <td>Apple Pain Management and Rehab </td>
              <td>Apple Pain @ Flushings</td>
              <td>Active</td>
              <td>9/1/2018</td>
              <td>-NA-</td>
              <td><a href="javascript:void(0)" class="btn btn-warning btn-sm" data-id="126"
                  data-get-url="/Admin/GetPracticeLocationSubscriptionListForEdit"
                  data-updatecontainer="#dvPopupTopNode" id="lnkEditpralocsub"
                  (click)="openEditpopup()">Edit</a>&nbsp;&nbsp;
                <a href="javascript:void(0)" class="btn btn-danger btn-sm lnkdelpralocSub" data-id="126"
                  data-req-url="/Admin/DeletePraLocSub" data-update-url="/Admin/GetPracticeLocationSubscriptionList"
                  data-updatecontainer="#dvPracticeLocationSubList" id="lnkdelpralocSub"
                  (click)="opendeletepopup()">Delete</a>

              </td>
            </tr>
            <tr data-id="96" id="trappointmentstatus" class="trappointmentstatus">

              <td>ASCPractice</td>
              <td>ASClocation</td>
              <td>Active</td>
              <td>1/1/2018</td>
              <td>-NA-</td>
              <td><a href="javascript:void(0)" class="btn btn-warning btn-sm" data-id="96"
                  data-get-url="/Admin/GetPracticeLocationSubscriptionListForEdit"
                  data-updatecontainer="#dvPopupTopNode" id="lnkEditpralocsub"
                  (click)="openEditpopup()">Edit</a>&nbsp;&nbsp;
                <a href="javascript:void(0)" class="btn btn-danger btn-sm lnkdelpralocSub" data-id="96"
                  data-req-url="/Admin/DeletePraLocSub" data-update-url="/Admin/GetPracticeLocationSubscriptionList"
                  data-updatecontainer="#dvPracticeLocationSubList" id="lnkdelpralocSub"
                  (click)="opendeletepopup()">Delete</a>

              </td>
            </tr>

          </tbody>
        </table>
      </div>
        <div class="custompagination pull-right pagpracticelocsubscription" style="margin-top:-17px"
          data-req-url="/Admin/GetPracticeLocationSubscriptionList" data-update-container="#dvPracticeLocationSubList">
          <span class="label pagerInfo">Showing <b>1-10</b> of <b>110</b></span>
          <!-- <ngb-pagination *ngIf="pageVariable" [maxSize]="5" [collectionSize]="totalItem" [(page)]="Page"
                    [(page)]="page" (pageChange)="loadPage([Page])" currentPage="pagenumber" [rotate]="true" size="sm"
                    [boundaryLinks]="true"></ngb-pagination> <br> -->
          <!-- <ul>
            <li class="disabled"><a data-val="0" href="javascript:void(0)">&lt;&lt;</a></li>
            <li><select class="pagerSelect input-small">
                <option selected="selected" value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6">6</option>
                <option value="7">7</option>
                <option value="8">8</option>
                <option value="9">9</option>
                <option value="10">10</option>
                <option value="11">11</option>
              </select></li>
            <li><a class="pagerItem" data-val="2" href="javascript:void(0)">&gt;&gt;</a></li>
          </ul>
        </div> -->

        </div>

      </div>
    </div>
  </div>
  <!-- </div> -->
  <!-- =====================================================Add Pop up==================================================================== -->



  <p-dialog id="add" [(visible)]="display" [modal]="true" [responsive]="true"
    [style]="{width: '900px', minWidth: '410px'}"  [positionTop]="75"
    [draggable]="false" [closable]="false">
    <p-header>
      <div class="head">

        <a href="javascript:void(0)" class="btn btn-danger btn-sm pull-right" (click)="closeadd()">close</a>
        <h3>Add Subscription</h3>
      </div>
    </p-header>

        <form [formGroup]="addpractice" (ngSubmit)="addnewpractice(addpractice)">
    <div class="modal-body">
      <div class="ibox-content">
        <div class="row">
          <div class="col-md-12">

            <div class="col-md-4">
              <label>Practice <span style="color: red">*</span></label>
              <select  formControlName="Practice" class="input-md form-control chosen-select"
                data-req-url="/Admin/GetPracticeLocationsForAdminScreen" data-update-container=".ddlLocationsubscrition"
                data-val="true" data-val-number="The field PracticeId must be a number." id="ddlPracticesubscrition"
                name="PracticeId" >
                <option value="">Select Practice</option>
                <option value="7">Prime Pain Clinic</option>
                <option value="8">Edison Rehab Acupunture PC</option>
                <option value="9">Prime Pain Clinic</option>
                <option value="10">Fort Lee Chiropractic Associates </option>

              </select>
              <label *ngIf="addpractice.get('Practice').hasError('required') && !addpractice.get('Practice').pristine"
              class="text"><span style="color:red">Practice is required</span></label>


            </div>
            <div class="col-md-4">
              <label>Location <span style="color: red">*</span></label>
              <select  formControlName="Location" class="form-control ddlLocationsubscrition chosen-select" data-val="true"
                data-val-number="The field LocationId must be a number." id="LocationId" name="LocationId"
               >
                <option value="">Select</option>

                <option  value="144">Apple Pain @ Flushings</option>
                <option value="481">New York</option>
              </select>
              <label *ngIf="addpractice.get('Location').hasError('required') && !addpractice.get('Location').pristine"
                        class="text"><span style="color:red">Location is required</span></label>

            </div>
            <div class="col-md-4">
              <label>Status <span style="color: red">*</span></label>
              <select formControlName="Status" class="form-control chosen-select ddlpracticelocsubstas" id="ddlpracticelocsubstas"
                >

                <option value="29" selected="">Active</option>
                <option value="31">Denied</option>

              </select>
              <label *ngIf="addpractice.get('Status').hasError('required') && !addpractice.get('Status').pristine"
              class="text"><span style="color:red">Status is required</span></label>

            </div>

          </div>
        </div>
        <br>
        <div class="row">
          <div class="col-md-12">


            <div class="col-md-4">

              <label>Subscription Start Date <span style="color: red">*</span></label>

              <input formControlName="Substartdate" type="text" class="form-control" placeholder="mm/dd/yy" id="datepicker" bsDatepicker><br>
              <label *ngIf="addpractice.get('Substartdate').hasError('required') && !addpractice.get('Substartdate').pristine"
              class="text"><span style="color:red">Substartdate is required</span></label>
            </div>
            <div class="col-md-4">

              <label>Subscription End Date</label>
              <input formControlName="Subenddate" type="text" id="txtsubscriptionenddate"   bsDatepicker class="form-control " value=""
                placeholder="mm/dd/yyyy">

            </div>

          </div>

        </div>
      </div>
    </div>

    <p-footer>
      <div>
        <button href="javascript:void(0)" class="btn btn-primary pull-right" id="btnsavepracticelocationsub"
        data-post-url="/Admin/InsertUpdatePracLocSubscriptions"
        data-get-url="/Admin/GetPracticeLocationSubscriptionList"
        data-updatecontainer="#dvPracticeLocationSubList" type="submit">Save</button>
      </div>

    </p-footer>
  </form>
  </p-dialog>

  <!-- ====================================Edit pop up========================================== -->
  <p-dialog id="add" [(visible)]="edit" [modal]="true" [responsive]="true"
    [style]="{width: '900px', minWidth: '410px'}"   [positionTop]="75"
    [draggable]="false" [closable]="false">
    <p-header>
      <div class="head">

        <a href="javascript:void(0)" class="btn btn-danger btn-sm pull-right" (click)="closeedit()">close</a>
        <h3>Edit Subscription</h3>
      </div>
    </p-header>
  <form [formGroup]="editpractice" (ngSubmit)="editnewpractice(editpractice)">
    <div class="modal-body">
      <div class="ibox-content">


        <div class="row">
          <div class="col-md-12">

            <div class="col-md-4">
              <label>Practice <span style="color: red">*</span></label>
              <select formControlName="Practice" class="input-md form-control chosen-select" name="PracticeId" >
                <option value="">Select Practice</option>
                <option value="7">Prime Pain Clinic</option>
                <option value="8">Edison Rehab Acupunture PC</option>
                <option value="9">Prime Pain Clinic</option>
                <option value="10">Fort Lee Chiropractic Associates </option>
                <option value="11">Englewood ER</option>
                <option value="12">Fort Lee Chiropractic</option>
                <option value="13">
              </select>
              <label *ngIf="editpractice.get('Practice').hasError('required') && !editpractice.get('Practice').pristine"
              class="text"><span style="color:red">Practice is required</span></label>
              <!-- <div class="chosen-container chosen-container-single  chosen-container-active chosen-with-drop" style="width: 100%" title=""
                id="ddlPracticesubscrition_chosen"><a class="chosen-single"><span>Apple Pain Management and Rehab
                  </span>
                  <div><b></b></div>
                </a>
                <div class="chosen-drop">
                  <div class="chosen-search"><input type="text" autocomplete="off"></div>
                  <ul class="chosen-results"></ul>
                </div>
              </div> -->

            </div>
            <div class="col-md-4">
              <label>Location <span style="color: red">*</span></label>
              <select formControlName="Location" class="form-control ddlLocationsubscrition chosen-select" data-val="true"
                data-val-number="The field LocationId must be a number." id="LocationId" name="LocationId"
               >
                <option value="">Select</option>
                <option selected="selected" value="144">Apple Pain @ Flushings</option>
                <option value="481">New York</option>
              </select>
              <label *ngIf="editpractice.get('Location').hasError('required') && !editpractice.get('Location').pristine"
              class="text"><span style="color:red">Location is required</span></label>
              <!-- <div class="chosen-container chosen-container-single" style="width: 100%" title="" id="LocationId_chosen">
                <a class="chosen-single"><span>Apple Pain @ Flushings</span>
                  <div><b></b></div>
                </a>
                <div class="chosen-drop">
                  <div class="chosen-search"><input type="text" autocomplete="off"></div>
                  <ul class="chosen-results"></ul>
                </div>
              </div> -->
            </div>
            <div class="col-md-4">
              <label>Status <span style="color: red">*</span></label>
              <select formControlName="Status" class="form-control chosen-select ddlpracticelocsubstas" id="ddlpracticelocsubstas"
                >

                <option value="29" selected="">Active</option>
                <option value="31">Denied</option>

              </select>
              <label *ngIf="editpractice.get('Status').hasError('required') && !editpractice.get('Status').pristine"
              class="text"><span style="color:red">Status is required</span></label>
              <!-- <div class="chosen-container chosen-container-single" style="width: 100%" title=""
                id="ddlpracticelocsubstas_chosen"><a class="chosen-single"><span>Active</span>
                  <div><b></b></div>
                </a>
                <div class="chosen-drop">
                  <div class="chosen-search"><input type="text" autocomplete="off"></div>
                  <ul class="chosen-results"></ul>
                </div>
              </div> -->

            </div>
          </div>

        </div>
        <br>
        <div class="row">
          <div class="col-md-12">
            <div class="col-md-4">

              <label>Subscription Start Date <span style="color: red">*</span></label>
              <input formControlName="Substartdate" type="text" bsDatepicker id="txtsubscriptionstartdate" class="form-control datepicker  hasDatepicker"
                value="9/1/2018" placeholder="mm/dd/yyyy">
                <label *ngIf="editpractice.get('Substartdate').hasError('required') && !editpractice.get('Substartdate').pristine"
                class="text"><span style="color:red">Substartdate is required</span></label>
            </div>
            <div class="col-md-4">

              <label>Subscription End Date</label>
              <input formControlName="Subenddate" type="text" bsDatepicker id="txtsubscriptionenddate" class="form-control datepicker hasDatepicker" value=""
                placeholder="mm/dd/yyyy">

            </div>
          </div>

        </div>
      </div>


    </div>

    <p-footer>
      <div>
        <button href="javascript:void(0)" class="btn btn-primary pull-right" id="btnsavepracticelocationsub"
        data-post-url="/Admin/InsertUpdatePracLocSubscriptions"
        data-get-url="/Admin/GetPracticeLocationSubscriptionList"
        data-updatecontainer="#dvPracticeLocationSubList" type="submit">Save</button>
      </div>

    </p-footer>
  </form>
  </p-dialog>

  <!-- ==========delet pop up================================================================== -->

  <p-dialog [(visible)]="delete" id="dlt" [modal]="true" [responsive]="true"
    [style]="{width: '900px', minWidth: '410px',top:'30px'}" [minY]="40" [baseZIndex]="1000" [positionTop]="50"
    [draggable]="false" [closable]="false">
    <p-header>
      <div>
        <!--
          <a href="javascript:void(0)" class="btn btn-danger btn-sm pull-right" (click)="closeedit()">close</a> -->
          <h3 id="del">Are you sure want to delete?</h3>
        </div>
      </p-header>
                  <form [formGroup]="addpractice" (ngSubmit)="deletepractice()">

        <div class="modal-footer"><a data-handler="0" class="btn null" href="javascript:; "(click)="closedelete()">Cancel</a><a data-handler="1"
            class="btn btn-primary" href="javascript:;">OK</a></div>
    </form>
      </p-dialog>

